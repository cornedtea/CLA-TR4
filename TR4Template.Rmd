---
title: "Applications of SVD: (insert your application)"
subtitle: "CLA365 Inc Technical Report"
author: "Courtney Brown, Tenzin Dayoe, Bethany Wang"
date: "Submitted 5/4/25"
output: 
  pdf_document: default
---

```{r echo=FALSE}
library(tidyverse)
library(ggplot2)
```

### Abstract{-}

In this report, we will demonstrate the utility of using principle component analysis to evaluate similarities among observations in a dataset. We will use data of votes from the US Senate for our analysis.

# Introduction

[Explain Principle Component Analysis]

# Examples

```{r}
singleCase <- read.csv("congress_votes_119-2025_s228.csv")
senator_names <- as.matrix(singleCase)[,5]
senator_parties <- as.matrix(singleCase)[,6]
```

```{r}
votes <- as.matrix(read.csv("combined_votes.csv"))[,2:132]
```

```{r}
out <- svd(votes)
sc_loadings <- out$v
sc_sdev <- out$d
sc_scores <- out$u %*% diag(out$d)
```

```{r plots}
votesFrame <- data.frame(x = sc_scores[,1], y = sc_scores[,2], name = senator_names, party = senator_parties)
ggplot(data=votesFrame, aes(x=x, y=y, col=party, label=name)) + 
  geom_point() +
  labs(title = "Senate Vote Map", x = "Component 1", y = "Component 2") + 
  theme_minimal() +
  scale_color_manual(values=c("Blue", "Red"))
```

```{r}
votes_approx <- 
```

# Bibliography

# R Code Appendix

## Scraper Code

This is the code written by Tenzin to form a single CSV file of the Senate votes, run from Google Colab.
```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import warnings
warnings.filterwarnings('ignore')

def getURL(sNumber):
    return f"https://www.govtrack.us/congress/votes/119-2025/s{sNumber}/export/csv"

urls = [getURL(i) for i in range(100, 231)]

combinedDf = None
for i, url in enumerate(urls):
    df = pd.read_csv(url, skiprows=1)

    df = df[['person', 'vote']]


    vote_col = f'vote_{i}'
    df[vote_col] = df['vote'].map({
        'Yea': 1,
        'Nay': -1,
        'Not Voting': 0,
        'NA': 0,
        '': 0
    }).fillna(0)

    df = df[['person', vote_col]]

    if combinedDf is None:
        combinedDf = df
    else:
        combinedDf = pd.merge(combinedDf, df, on='person', how='outer')

print(combinedDf)

combinedDf = combinedDf.fillna(0)
combinedDf.to_csv('combined_votes.csv', index=False)

from google.colab import files
files.download('combined_votes.csv')
```
